<div class="actions">
  <%= link_to 'Back', students_path %> |
  <%= link_to 'Destroy', @student, method: :delete, data: {confirm: "Are you sure you want to destory the records for #{@student.first_name} #{@student.last_name}?"} %>
  <% if @student.errors.any? %>
      <% @student.errors.full_messages.each do |msg| %>
          <span class="error"><%= msg %></span>
      <% end %>
  <% end %>
  <span id="notice"><%= notice %></span>
</div>


<div class="layoutlayout">
  <div>
    <h2>Info</h2>
    <table>
      <%= form_for(@student) do |f| %>
          <tr>
            <th>First name</th>
            <td><%= f.text_field :first_name, placeholder: 'Enter first name' %></td>
          </tr>
          <tr>
            <th>Last name</th>
            <td><%= f.text_field :last_name, placeholder: 'Enter last name' %></td>
          </tr>
          <tr>
            <th>UGID</th>
            <td><%= f.text_field :ugid, placeholder: 'Enter UGID' %></td>
          </tr>
          <tr>
            <th></th>
            <td><%= f.submit 'Update' %></td>
          </tr>
      <% end %>
    </table>
  </div>

  <div>
    <h2>Roles</h2>
    <%= form_tag add_role_student_path do %>
        <table>
          <tr>
            <th>Name</th>
            <th>Expires*</th>
            <th></th>
          </tr>
          <% @student.role_assignments.each do |assignment| %>
              <tr>
                <td><%= link_to(assignment.role.name, assignment.role) %></td>
                <td><%= assignment.expires %></td>
                <td><%= link_to 'Remove', action: :remove_role, role_id: assignment.role.id %></td>
              </tr>
          <% end %>
          <tr>
            <td>
              <input type="text" name="role_name" list="roles" placeholder="Enter name">
              <datalist id="roles">
                <%= (Role.all - @student.roles).each do |role| %>
                    <option value="<%= role.name %>"></option>
                <% end %>
              </datalist>
            </td>
            <td><%= date_field '', 'expire', include_blank: true %></td>
            <td><%= submit_tag 'Add' %></td>
          </tr>
        </table>
    <% end %>
  </div>

  <div>
    <h2>Privileges</h2>
    <%= form_tag add_privilege_student_path do %>
        <table>
          <tr>
            <th>Name</th>
            <th>Expires**</th>
            <th></th>
          </tr>
          <% @student.privilege_assignments.each do |assignment| %>
              <tr>
                <td><%= link_to(assignment.privilege.name, assignment.privilege) %></td>
                <td><%= assignment.expires %></td>
                <td><%= link_to 'Remove', action: :remove_privilege, role_id: assignment.privilege.id %></td>
              </tr>
          <% end %>
          <tr>
            <td>
              <input type="text" name="priv_name" list="privs" placeholder="Enter name">
              <datalist id="privs">
                <%= (Privilege.all - @student.privileges).each do |priv| %>
                    <option value="<%= priv.name %>"></option>
                <% end %>
              </datalist>
            </td>
            <td><%= date_field '', 'expire', include_blank: true %></td>
            <td><%= submit_tag 'Add' %></td>
          </tr>
        </table>
    <% end %>
  </div>

  <div>
    <h2>Positions</h2>
    <table>
      <tr>
        <td>Name</td>
        <td></td>
      </tr>
      <% @student.positions.each do |position| %>
          <tr>
            <td><%= link_to(position.name, position) %></td>
            <td><a href="#">Delete</a></td>
          </tr>
      <% end %>
      <tr>
        <td colspan="2">Positions need to be added in DFUNKT.</td>
      </tr>
    </table>
  </div>
</div>

<p>* Unless a default term end is set on the role.</p>
<p>** Can be left blank to set indefinite</p>